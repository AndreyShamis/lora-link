# OpenOCD configuration for ESP-Prog with ESP32-S3

# Interface configuration for ESP-Prog (FT2232H based)
adapter driver ftdi
ftdi device_desc "Dual RS232-HS"
ftdi vid_pid 0x0403 0x6010

# ESP-Prog JTAG pin configuration
ftdi layout_init 0x0008 0x000b
ftdi layout_signal nTRST -data 0x0100 -oe 0x0100
ftdi layout_signal nSRST -data 0x0200 -oe 0x0200

# Adapter speed - reduced for stability
adapter speed 5000

# ESP32-S3 target configuration
source [find target/esp32s3.cfg]

# Reset configuration
reset_config trst_and_srst

# Initialize and halt
$_TARGETNAME_0 configure -event gdb-attach {
    halt
    # Give the target time to halt
    sleep 100
}

init
